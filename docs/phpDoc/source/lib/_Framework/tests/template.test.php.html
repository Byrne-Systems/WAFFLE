<html>
    <head>
        <script
            type="text/javascript"
            src="../../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php
/**
 * testTemplate : Unit Testing class for &quot;template.class.php&quot;
 *
 * @package     UnitTests\testTemplate
 * @category    UnitTest
 * @author      Justin D. Byrne &lt;justin@byrne-systems.com&gt;
 */

namespace UnitTests;

use UnitTests\testTemplate;
use WAFFLE\Framework\Engines\Template;

require_once __DIR__ . '/../template.class.php';

/**
 * @author  Justin D. Byrne &lt;justin@byrne-systems.com&gt;
 */
class testTemplate extends \PHPUnit_Framework_TestCase {
    protected $template;

    public function setUp()
    {
        $assets = 'C:/xampp/htdocs/lib/_Framework/tests/assets/';                                # Location: of vital assets for unit testing
        $this-&gt;template = new Template($assets . 'testTemplate.wad');                               # Instantiate: new Template object
    }

    /**
     * [Description]
     *
     * @assert()                                        [Description]
     */
    public function test_template_set_N_output_methods()
    {
        $this-&gt;template-&gt;set('test', 'Application Test');                                           # Set: tag 'test' to 'Application Test'
        $this-&gt;assertEquals('Application Test', $this-&gt;template-&gt;output());                         # @assertEquals
    }

    /**
     * [Description]
     */
    public function test_Merge_Templates()
    {
        $assets = 'C:/xampp/htdocs/lib/_Framework/tests/assets/';                                # Location: of vital assets for unit testing

        // Generate: an array holding various user's attributes
        $users = array(
            array(      # [0] CASE: First user and their associated birthplace
                &quot;username&quot; =&gt; &quot;monkey&quot;,
                &quot;location&quot; =&gt; &quot;Portugal&quot;
            ),
            array(      # [1] CASE: Second user and their associated birthplace
                &quot;username&quot; =&gt; &quot;Sailor&quot;,
                &quot;location&quot; =&gt; &quot;Moon&quot;
            ),
            array(      # [2] CASE: Third user and their associated birthplace
                &quot;username&quot; =&gt; &quot;Trex&quot;,
                &quot;location&quot; =&gt; &quot;Caribbean Islands&quot;
            )
        );

        // Set: each user's value within '$users' (Array) into '$row' then put all rows in '$users_templates'
        foreach ($users as $user) {
            $row = new Template($assets . 'list_users_row.wad');

            foreach ($user as $key =&gt; $value) { $row-&gt;set($key, $value); }

            $users_templates[] = $row;
        }

        $users_contents = Template::merge($users_templates);                                        # Merge: template's together

        $users_list = new Template($assets . 'list_users.wad');                                     # Instantiate: new template

        $users_list-&gt;set('users', $users_contents);                                                 # Set: the '$user_contents' within the '$users_list' (Object)

        $layout = new Template($assets . 'layout.wad');                                             # Instantiate: new template

        $layout-&gt;set('title', 'Users');                                                             # Set: the 'title' of the '$layout' template with &quot;Users&quot;

        $layout-&gt;set('content', $users_list-&gt;output());                                             # Set: the 'content' of the '$users_list' template with the parsed content of '$users_list'

        $expected = file_get_contents($assets . 'page.html');                                       # Get: expected file contents of the 'page.html' file

        // Assert: both $expected and asserted context(s) with preg_split, to negate any addition (or added) carriage returns...
        $this-&gt;assertEquals(preg_split('/\r\n|\r|\n/',$expected), preg_split('/\r\n|\r|\n/', $layout-&gt;output()));
    }

    /**
     * [Description]
     *
     * @assert()                                        [Description]
     */
    public function test_Failure_Output()
    {
        $this-&gt;template = new Template('not_real_file.wad');                                        # Instantiate: new template with a phony template file

        $msg = '[error] cannot load template file (not_real_file.wad).';                                  # Error message

        $this-&gt;assertEquals($msg, $this-&gt;template-&gt;output());                                       # Output: parsed content
    }
}</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>